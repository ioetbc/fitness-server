=== IMPLEMENTATION PROGRESS ===

[✓] Task 1: Add Unit Normalization to Logging Prompt
    Files: src/prompts/habit-tracking-prompts.ts, src/types/habit-schemas.ts
    - Added comprehensive unit normalization section to HABIT_LOGGING_SYSTEM_PROMPT
    - Defined standard units for distance, time, weight, volume, and count
    - Added Example 10 demonstrating unit normalization ("5k" → "km")
    - Created allowedUnits const array with all normalized values
    - Updated habitLogParseSchema, createHabitLogSchema, habitLogResponseSchema to use z.enum(allowedUnits)
    - Two-layer validation: LLM prompt guides + Zod schema enforces
    Commit: 1ad1979

[✓] Task 2: Fix Query Prompt - Add Existing Habits Context
    Files: src/prompts/habit-tracking-prompts.ts, src/routes/habits.ts
    - Added "CRITICAL: Semantic Habit Matching" section to HABIT_QUERY_SYSTEM_PROMPT
    - Updated buildQueryPrompt() signature to accept existingHabits parameter
    - Added logic to format existing habits list in prompt
    - Updated /query route to fetch existing habits from database
    - Now LLM can map "have a drink" → "drinking" habit
    Commit: c369b92

[ ] Task 3: Fix Query Prompt - Add Quantity Aggregation Guidance
    Files: src/prompts/habit-tracking-prompts.ts
    - Add "Aggregate Queries" section after line 318 in HABIT_QUERY_SYSTEM_PROMPT
    - Explain that "how many kilometers" queries need to sum quantity field
    - Add example response for aggregate queries

[ ] Task 4: Fix Query Prompt - Add Longest Streak Guidance
    Files: src/prompts/habit-tracking-prompts.ts
    - Update streak query examples to include longest streak
    - Clarify that getHabitStatsTool returns both current and longest streaks
    - Add example response for longest streak queries
